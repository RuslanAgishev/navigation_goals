<?xml version="1.0" encoding="UTF-8" ?>
<launch>
    <arg name="use_osm" default="false"/>
    <arg name="cloud" default="cloud_segmentation/points"/>
    <arg name="gpx_assignment" default="$(find gps_to_path)/data/old/unhost_easy.gpx"/>
    <arg name="odom_frame" default="gps_odom"/>

    <!-- IMU and Magnetometer to azimuth data -->
<!--    <node pkg="navigation_goals" type="imu_to_mag_azimuth" name="imu_to_mag_azimuth"/>-->
    <node pkg="gps_to_path" type="mag_field_to_azimuth" name="mag_field_to_azimuth" output="screen">
        <rosparam subst_value="true">
            x_mean: 0.0
            y_mean: 0.0
            z_mean: 0.0
        </rosparam>
    </node>

    <!-- PATH PLANNER -->
    <node pkg="gps_to_path" type="path_planner_igraph" name="path_planner" output="screen">
    	<param name="gpx_assignment" type="string" value="$(arg gpx_assignment)"/>
        <param name="goal_reached_distance" type="double" value="2."/>
        <param name="publish_pcd" type="bool" value="true"/>
        <param name="trav_max_dist" type="double" value="20."/>
        <param name="points_absence_radius" type="double" value="2."/>
        <param name="trav_radius" type="double" value="0.25"/>
        <param name="untrav_cost" type="double" value="100."/>
        <param name="absence_cost" type="double" value="1000."/>
        <param name="max_traversable_cost" type="double" value="100."/>
        <param name="long_term_memory_longevity" type="double" value="0.997" />
        <param name="short_term_memory_longevity" type="double" value="0.9"/>
        <param name="trav_inheritance_radius" type="double" value="0.71"/>
        <param name="robot_base_frame" type="string" value="base_link"/>
        <param name="max_goal_untrav_cost" type="double" value="500."/>
        <!--param name="max_path_cost" type="double" value="1000." /-->
        <param name="max_subgraph_time" type="double" value="1200." />
        <param name="use_osm" type="bool" value="$(arg use_osm)"/>
	    <param name="osm_use_solitary_nodes" type="bool" value="false"/>
        <param name="repeat" type="bool" value="false"/>
        <param name="next_waypoint_proximity_switch" type="bool" value="true"/>
        <param name="min_time_near_goal" type="double" value="1."/>
        <param name="flip" type="bool" value="false"/>

        <param name="max_height" type="double" value="1.0"/>
        <param name="min_height" type="double" value="-1.0"/>
        <param name="max_age" type="double" value="1."/>
        <param name="trav_obstacle_field" type="string" value="cost"/>
        <param name="trav_topic" type="string" value="$(arg cloud)"/>
        <param name="odom_frame" type="string" value="$(arg odom_frame)"/>
        <param name="max_relative_path_cost_change" type="double" value="0.5"/>
    </node>

    <!-- PATH from waypoints -->
    <node pkg="gps_to_path" type="waypoints_to_path" name="waypoints_to_path" output="screen">
        <param name="odom_frame" type="string" value="$(arg odom_frame)"/>
    </node>

</launch>
